import"./vendor.9f72332b.js";/* empty css             *//* empty css               */import{_ as e,f as t,b as r,D as a,g as l,Q as o,R as n,i,A as s,z as u,s as d,B as p,C as c,E as m,o as f,c as g,w as b,a as y,e as h,l as v,S,F as _,T as w,n as x,G as k,H as C,v as j,U as P,J as z}from"./index.f782953c.js";/* empty css                     *//* empty css              *//* empty css                 *//* empty css                   */const I={class:"header"},N={key:0},D={key:1},V={key:2};var T=e({__name:"Order",setup(e){const T=t({loading:!1,tableData:[],multipleSelection:[],total:0,currentPage:1,pageSize:10,orderNo:"",orderStatus:"",options:[{value:"",label:"全部"},{value:0,label:"待支付"},{value:1,label:"已支付"},{value:2,label:"配货完成"},{value:3,label:"出库成功"},{value:4,label:"交易成功"},{value:-1,label:"手动关闭"},{value:-2,label:"超时关闭"},{value:-3,label:"商家关闭"}]});r((()=>{O()}));const O=()=>{T.loading=!0,a.get("/orders",{params:{pageNumber:T.currentPage,pageSize:T.pageSize,orderNo:T.orderNo,orderStatus:T.orderStatus}}).then((e=>{T.tableData=e.list,T.total=e.totalCount,T.currentPage=e.currPage,T.loading=!1}))},U=()=>{T.currentPage=1,O()},q=e=>{T.multipleSelection=e},A=e=>{T.currentPage=e,O()},B=e=>{let t;if(e)t=[e];else{if(!T.multipleSelection.length)return console.log("state.multipleSelection",T.multipleSelection.length),void j.error("请选择项");t=T.multipleSelection.map((e=>e.orderId))}a.put("/orders/checkDone",{ids:t}).then((()=>{j.success("配货成功"),O()}))},E=e=>{let t;if(e)t=[e];else{if(!T.multipleSelection.length)return void j.error("请选择项");t=T.multipleSelection.map((e=>e.orderId))}a.put("/orders/checkOut",{ids:t}).then((()=>{j.success("出库成功"),O()}))},F=e=>{let t;if(e)t=[e];else{if(!T.multipleSelection.length)return void j.error("请选择项");t=T.multipleSelection.map((e=>e.orderId))}a.put("/orders/close",{ids:t}).then((()=>{j.success("关闭成功"),O()}))};return(e,t)=>{const r=l,a=o,j=n,O=i,G=s,H=u,J=d("router-link"),M=p,Q=c,R=m;return f(),g(R,{class:"order-container"},{header:b((()=>[y("div",I,[h(r,{style:{width:"200px","margin-right":"10px"},placeholder:"请输入订单号",modelValue:T.orderNo,"onUpdate:modelValue":t[0]||(t[0]=e=>T.orderNo=e),onChange:U,clearable:""},null,8,["modelValue"]),h(j,{onChange:U,modelValue:T.orderStatus,"onUpdate:modelValue":t[1]||(t[1]=e=>T.orderStatus=e),style:{width:"200px","margin-right":"10px"}},{default:b((()=>[(f(!0),v(_,null,S(T.options,(e=>(f(),g(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),w(' <el-button type="primary" size="small" icon="el-icon-edit">修改订单</el-button> '),h(O,{type:"primary",icon:k(P),onClick:t[2]||(t[2]=e=>B())},{default:b((()=>t[5]||(t[5]=[x("配货完成")]))),_:1},8,["icon"]),h(O,{type:"primary",icon:k(P),onClick:t[3]||(t[3]=e=>E())},{default:b((()=>t[6]||(t[6]=[x("出库")]))),_:1},8,["icon"]),h(O,{type:"danger",icon:k(z),onClick:t[4]||(t[4]=e=>F())},{default:b((()=>t[7]||(t[7]=[x("关闭订单")]))),_:1},8,["icon"])])])),default:b((()=>[h(M,{load:T.loading,data:T.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:q},{default:b((()=>[h(G,{type:"selection",width:"55"}),h(G,{prop:"orderNo",label:"订单号"}),h(G,{prop:"totalPrice",label:"订单总价"}),h(G,{prop:"orderStatus",label:"订单状态"},{default:b((t=>[y("span",null,C(e.$filters.orderMap(t.row.orderStatus)),1)])),_:1}),h(G,{prop:"payType",label:"支付方式"},{default:b((e=>[1==e.row.payType?(f(),v("span",N,"微信支付")):2==e.row.payType?(f(),v("span",D,"支付宝支付")):(f(),v("span",V,"未知"))])),_:1}),h(G,{prop:"createTime",label:"创建时间"}),h(G,{label:"操作"},{default:b((e=>[1==e.row.orderStatus?(f(),g(H,{key:0,title:"确定配货完成吗？",onConfirm:t=>B(e.row.orderId),"confirm-button-text":"确定","cancel-button-text":"取消"},{reference:b((()=>t[8]||(t[8]=[y("a",{style:{cursor:"pointer","margin-right":"10px"}},"配货完成",-1)]))),_:2},1032,["onConfirm"])):w("v-if",!0),2==e.row.orderStatus?(f(),g(H,{key:1,title:"确定出库吗？",onConfirm:t=>E(e.row.orderId),"confirm-button-text":"确定","cancel-button-text":"取消"},{reference:b((()=>t[9]||(t[9]=[y("a",{style:{cursor:"pointer","margin-right":"10px"}},"出库",-1)]))),_:2},1032,["onConfirm"])):w("v-if",!0),4==e.row.orderStatus||e.row.orderStatus<0?w("v-if",!0):(f(),g(H,{key:2,title:"确定关闭订单吗？",onConfirm:t=>F(e.row.orderId),"confirm-button-text":"确定","cancel-button-text":"取消"},{reference:b((()=>t[10]||(t[10]=[y("a",{style:{cursor:"pointer","margin-right":"10px"}},"关闭订单",-1)]))),_:2},1032,["onConfirm"])),h(J,{to:{path:"/order_detail",query:{id:e.row.orderId}}},{default:b((()=>t[11]||(t[11]=[x("订单详情")]))),_:2},1032,["to"])])),_:1})])),_:1},8,["load","data"]),h(Q,{background:"",layout:"prev, pager, next",total:T.total,"page-size":T.pageSize,"current-page":T.currentPage,onCurrentChange:A},null,8,["total","page-size","current-page"])])),_:1})}}},[["__file","D:/trail/js代码/vueProject/vue3-admin-main/src/views/Order.vue"]]);export{T as default};
