import"./vendor.9f72332b.js";/* empty css             *//* empty css               */import{_ as e,r as o,f as r,o as l,c as a,w as t,a as n,e as i,n as d,v as s,D as u,g as c,h as m,k as p,i as f,y as g,K as y,L as b,b as v,z as _,A as h,B as k,C as F,E as x,l as C,F as T,G as w,H as V,I as j,J as I}from"./index.f782953c.js";/* empty css                     *//* empty css              *//* empty css                 *//* empty css                   *//* empty css                *//* empty css                  */const S={class:"dialog-footer"};var U=e({__name:"DialogAddGood",props:{type:String,configType:Number,reload:Function},setup(e,{expose:y}){const b=e,v=o(null),_=r({visible:!1,ruleForm:{name:"",link:"",id:"",sort:""},rules:{name:[{required:"true",message:"名称不能为空",trigger:["change"]}],id:[{required:"true",message:"编号不能为空",trigger:["change"]}],sort:[{required:"true",message:"排序不能为空",trigger:["change"]}]},id:""}),h=()=>{v.value.validate((e=>{if(e){if(_.ruleForm.id<0||_.ruleForm.id>200)return void s.error("商品编号不能小于 0 或大于 200");"add"==b.type?u.post("/indexConfigs",{configType:b.configType||3,configName:_.ruleForm.name,redirectUrl:_.ruleForm.link,goodsId:_.ruleForm.id,configRank:_.ruleForm.sort}).then((()=>{s.success("添加成功"),_.visible=!1,b.reload&&b.reload()})):u.put("/indexConfigs",{configId:_.id,configType:b.configType||3,configName:_.ruleForm.name,redirectUrl:_.ruleForm.link,goodsId:_.ruleForm.id,configRank:_.ruleForm.sort}).then((()=>{s.success("修改成功"),_.visible=!1,b.reload&&b.reload()}))}}))};return y({open:e=>{_.visible=!0,e?(_.id=e,(e=>{u.get(`/indexConfigs/${e}`).then((e=>{_.ruleForm={name:e.configName,id:e.goodsId,link:e.redirectUrl,sort:e.configRank}}))})(e)):_.ruleForm={name:"",id:"",link:"",sort:""}},close:()=>{_.visible=!1}}),(o,r)=>{const s=c,u=m,y=p,b=f,k=g;return l(),a(k,{title:"add"==e.type?"添加商品":"修改商品",modelValue:_.visible,"onUpdate:modelValue":r[5]||(r[5]=e=>_.visible=e),width:"400px"},{footer:t((()=>[n("span",S,[i(b,{onClick:r[4]||(r[4]=e=>_.visible=!1)},{default:t((()=>r[6]||(r[6]=[d("取 消")]))),_:1}),i(b,{type:"primary",onClick:h},{default:t((()=>r[7]||(r[7]=[d("确 定")]))),_:1})])])),default:t((()=>[i(y,{model:_.ruleForm,rules:_.rules,ref_key:"formRef",ref:v,"label-width":"100px",class:"good-form"},{default:t((()=>[i(u,{label:"商品名称",prop:"name"},{default:t((()=>[i(s,{type:"text",modelValue:_.ruleForm.name,"onUpdate:modelValue":r[0]||(r[0]=e=>_.ruleForm.name=e)},null,8,["modelValue"])])),_:1}),i(u,{label:"跳转链接",prop:"link"},{default:t((()=>[i(s,{type:"text",modelValue:_.ruleForm.link,"onUpdate:modelValue":r[1]||(r[1]=e=>_.ruleForm.link=e)},null,8,["modelValue"])])),_:1}),i(u,{label:"商品编号",prop:"id"},{default:t((()=>[i(s,{type:"number",min:"0",modelValue:_.ruleForm.id,"onUpdate:modelValue":r[2]||(r[2]=e=>_.ruleForm.id=e)},null,8,["modelValue"])])),_:1}),i(u,{label:"排序值",prop:"sort"},{default:t((()=>[i(s,{type:"number",modelValue:_.ruleForm.sort,"onUpdate:modelValue":r[3]||(r[3]=e=>_.ruleForm.sort=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])}}},[["__file","D:/trail/js代码/vueProject/vue3-admin-main/src/components/DialogAddGood.vue"]]);const P={class:"header"},D=["href"],z=["onClick"];var N=e({__name:"IndexConfig",setup(e){const a={hot:3,new:4,recommend:5},c=y(),m=b(),p=o(null),g=o(null),S=r({loading:!1,tableData:[],multipleSelection:[],total:0,currentPage:1,pageSize:10,type:"add",configType:3});c.beforeEach((e=>{["hot","new","recommend"].includes(e.name)&&(S.configType=a[e.name],S.currentPage=1,N())})),v((()=>{S.configType=a[m.name],N()}));const N=()=>{S.loading=!0,u.get("/indexConfigs",{params:{pageNumber:S.currentPage,pageSize:S.pageSize,configType:S.configType}}).then((e=>{S.tableData=e.list,S.total=e.totalCount,S.currentPage=e.currPage,S.loading=!1}))},B=()=>{S.type="add",g.value.open()},R=e=>{S.multipleSelection=e},G=()=>{S.multipleSelection.length?u.delete("/indexConfigs",{ids:S.multipleSelection.map((e=>e.configId))}).then((()=>{s.success("删除成功"),N()})):s.error("请选择项")},q=e=>{S.currentPage=e,N()};return(e,o)=>{const r=f,a=_,c=h,m=k,y=F,b=x;return l(),C(T,null,[i(b,{class:"index-container"},{header:t((()=>[n("div",P,[i(r,{type:"primary",icon:w(j),onClick:B},{default:t((()=>o[0]||(o[0]=[d("增加")]))),_:1},8,["icon"]),i(a,{title:"确定删除吗？",confirmButtonText:"确定",cancelButtonText:"取消",onConfirm:G},{reference:t((()=>[i(r,{type:"danger",icon:w(I)},{default:t((()=>o[1]||(o[1]=[d("批量删除")]))),_:1},8,["icon"])])),_:1})])])),default:t((()=>[i(m,{load:S.loading,ref_key:"multipleTable",ref:p,data:S.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:R},{default:t((()=>[i(c,{type:"selection",width:"55"}),i(c,{prop:"configName",label:"商品名称"}),i(c,{label:"跳转链接"},{default:t((e=>[n("a",{target:"_blank",href:e.row.redirectUrl},V(e.row.redirectUrl),9,D)])),_:1}),i(c,{prop:"configRank",label:"排序值",width:"120"}),i(c,{prop:"goodsId",label:"商品编号",width:"200"}),i(c,{prop:"createTime",label:"添加时间",width:"200"}),i(c,{label:"操作",width:"100"},{default:t((e=>[n("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:o=>{return r=e.row.configId,S.type="edit",void g.value.open(r);var r}},"修改",8,z),i(a,{title:"确定删除吗？",confirmButtonText:"确定",cancelButtonText:"取消",onConfirm:o=>{return r=e.row.configId,void u.delete("/indexConfigs",{ids:[r]}).then((()=>{s.success("删除成功"),N()}));var r}},{reference:t((()=>o[2]||(o[2]=[n("a",{style:{cursor:"pointer"}},"删除",-1)]))),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["load","data"]),i(y,{background:"",layout:"prev, pager, next",total:S.total,"page-size":S.pageSize,"current-page":S.currentPage,onCurrentChange:q},null,8,["total","page-size","current-page"])])),_:1}),i(U,{ref_key:"addGood",ref:g,reload:N,type:S.type,configType:S.configType},null,8,["type","configType"])],64)}}},[["__scopeId","data-v-c24c5f2c"],["__file","D:/trail/js代码/vueProject/vue3-admin-main/src/views/IndexConfig.vue"]]);export{N as default};
