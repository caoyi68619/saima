import"./vendor.9f72332b.js";/* empty css             *//* empty css               */import{_ as e,r as l,f as r,u as a,q as t,s as o,t as s,o as i,c as u,w as n,a as d,e as c,n as p,l as m,v as g,D as f,x as v,h as b,g as h,k as _,i as k,y,b as w,z as j,A as F,B as S,C as x,E as U,F as C,G as P,H as V,I as D,J as z}from"./index.f782953c.js";/* empty css                     *//* empty css              *//* empty css                 *//* empty css                   *//* empty css                *//* empty css                  */const I=["src"],R={class:"dialog-footer"};var T=e({__name:"DialogAddSwiper",props:{type:String,reload:Function},setup(e,{expose:w}){const j=e,F=l(null),S=r({uploadImgServer:a,token:t("token")||"",visible:!1,ruleForm:{url:"",link:"",sort:""},rules:{url:[{required:"true",message:"图片不能为空",trigger:["change"]}],sort:[{required:"true",message:"排序不能为空",trigger:["change"]}]},id:""}),x=e=>{const l=e.name.split(".")[1]||"";if(!["jpg","jpeg","png"].includes(l))return g.error("请上传 jpg、jpeg、png 格式的图片"),!1},U=e=>{S.ruleForm.url=e.data||""},C=()=>{console.log(F.value.validate),F.value.validate((e=>{e&&("add"==j.type?f.post("/carousels",{carouselUrl:S.ruleForm.url,redirectUrl:S.ruleForm.link,carouselRank:S.ruleForm.sort}).then((()=>{g.success("添加成功"),S.visible=!1,j.reload&&j.reload()})):f.put("/carousels",{carouselId:S.id,carouselUrl:S.ruleForm.url,redirectUrl:S.ruleForm.link,carouselRank:S.ruleForm.sort}).then((()=>{g.success("修改成功"),S.visible=!1,j.reload&&j.reload()})))}))};return w({open:e=>{S.visible=!0,e?(S.id=e,(e=>{f.get(`/carousels/${e}`).then((e=>{S.ruleForm={url:e.carouselUrl,link:e.redirectUrl,sort:e.carouselRank}}))})(e)):S.ruleForm={url:"",link:"",sort:""}},close:()=>{S.visible=!1}}),(l,r)=>{const a=o("Plus"),t=s,g=v,f=b,w=h,j=_,P=k,V=y;return i(),u(V,{title:"add"==e.type?"添加轮播图":"修改轮播图",modelValue:S.visible,"onUpdate:modelValue":r[3]||(r[3]=e=>S.visible=e),width:"400px"},{footer:n((()=>[d("span",R,[c(P,{onClick:r[2]||(r[2]=e=>S.visible=!1)},{default:n((()=>r[4]||(r[4]=[p("取 消")]))),_:1}),c(P,{type:"primary",onClick:C},{default:n((()=>r[5]||(r[5]=[p("确 定")]))),_:1})])])),default:n((()=>[c(j,{model:S.ruleForm,rules:S.rules,ref_key:"formRef",ref:F,"label-width":"100px",class:"good-form"},{default:n((()=>[c(f,{label:"图片",prop:"url"},{default:n((()=>[c(g,{class:"avatar-uploader",action:S.uploadImgServer,accept:"jpg,jpeg,png",headers:{token:S.token},"show-file-list":!1,"before-upload":x,"on-success":U},{default:n((()=>[S.ruleForm.url?(i(),m("img",{key:0,style:{width:"200px",height:"100px",border:"1px solid #e9e9e9"},src:S.ruleForm.url,class:"avatar"},null,8,I)):(i(),u(t,{key:1,class:"avatar-uploader-icon"},{default:n((()=>[c(a)])),_:1}))])),_:1},8,["action","headers"])])),_:1}),c(f,{label:"跳转链接",prop:"link"},{default:n((()=>[c(w,{type:"text",modelValue:S.ruleForm.link,"onUpdate:modelValue":r[0]||(r[0]=e=>S.ruleForm.link=e)},null,8,["modelValue"])])),_:1}),c(f,{label:"排序值",prop:"sort"},{default:n((()=>[c(w,{type:"number",modelValue:S.ruleForm.sort,"onUpdate:modelValue":r[1]||(r[1]=e=>S.ruleForm.sort=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])}}},[["__scopeId","data-v-6c3e84de"],["__file","D:/trail/js代码/vueProject/vue3-admin-main/src/components/DialogAddSwiper.vue"]]);const q={class:"header"},A=["src"],B=["href"];var E=e({__name:"Swiper",setup(e){const a=l(),t=r({loading:!1,tableData:[],currentPage:1,pageSize:10,type:"add",multipleSelection:[],total:0});w((()=>{o()}));const o=()=>{t.loading=!0,f.get("/carousels",{params:{pageNumber:t.currentPage,pageSize:t.pageSize}}).then((e=>{t.tableData=e.list,t.total=e.totalCount,t.currentPage=e.currPage,t.loading=!1}))},s=()=>{console.log("addSwiper",a.value),t.type="add",a.value.open()},u=e=>{t.multipleSelection=e},v=()=>{t.multipleSelection.length?f.delete("/carousels",{data:{ids:t.multipleSelection.map((e=>e.carouselId))}}).then((()=>{g.success("删除成功"),o()})):g.error("请选择项")},b=e=>{t.currentPage=e,o()};return(e,l)=>{const r=k,g=j,f=F,h=S,_=x,y=U;return i(),m(C,null,[c(y,{class:"swiper-container"},{header:n((()=>[d("div",q,[c(r,{type:"primary",icon:P(D),onClick:s},{default:n((()=>l[0]||(l[0]=[p("增加")]))),_:1},8,["icon"]),c(g,{title:"确定删除吗？",confirmButtonText:"确定",cancelButtonText:"取消",onConfirm:v},{reference:n((()=>[c(r,{type:"danger",icon:P(z)},{default:n((()=>l[1]||(l[1]=[p("批量删除")]))),_:1},8,["icon"])])),_:1})])])),default:n((()=>[c(h,{load:t.loading,ref:"multipleTable",data:t.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:u},{default:n((()=>[c(f,{type:"selection",width:"55"}),c(f,{label:"轮播图",width:"200"},{default:n((e=>[d("img",{style:{width:"150px",height:"150px"},src:e.row.carouselUrl,alt:"轮播图"},null,8,A)])),_:1}),c(f,{label:"跳转链接"},{default:n((e=>[d("a",{target:"_blank",href:e.row.redirectUrl},V(e.row.redirectUrl),9,B)])),_:1}),c(f,{prop:"carouselRank",label:"排序值",width:"120"}),c(f,{prop:"createTime",label:"添加时间",width:"200"})])),_:1},8,["load","data"]),c(_,{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage,onCurrentChange:b},null,8,["total","page-size","current-page"])])),_:1}),c(T,{ref_key:"addSwiper",ref:a,reload:o,type:t.type},null,8,["type"])],64)}}},[["__file","D:/trail/js代码/vueProject/vue3-admin-main/src/views/Swiper.vue"]]);export{E as default};
